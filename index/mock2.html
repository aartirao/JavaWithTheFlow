<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/jquery-ui.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/powerange.css" type="text/css" />
    <script src="/static/scripts/vendor/jquery.js"></script>
    <script src="/static/scripts/vendor/bootstrap.js"></script>
    <script src="/static/scripts/vendor/jquery-ui.js"></script>
    <script src="/static/scripts/vendor/jquery_loadTemplate.js"></script>
    <script src="/static/scripts/vendor/powerange.js"></script>
    <script src="/static/scripts/vendor/ckeditor.js"></script>
    <script src="/static/scripts/vendor/mustache.min.js"></script>
    <title> Java with the Flow!</title>

    

    <script type="text/javascript">
        var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
      };       
        
    $(function() {
        $("#usefulposts").hide();
        
        $.ajax({url: '/getQuestionList/'+getUrlParameter('topic'), success: function(result){
            console.log("starts..");
            $("#templates").load("/static/templates/question.html", function() {
                console.log("going on..");
                var template = document.getElementById('qTemplate').innerHTML;
                qList = result["data"];
                for(var i=0; i<qList.length; i++) {
                    console.log("loop");
                    var output = Mustache.render(template, qList[i]);
                    $("#grouptraffic").append(output);
                    console.log(qList[i]);
                }    
            });            
        }});            
    });
    </script>

</head>

<body class="container">
    <h1 class="heading"> Java with the flow </h1>
    <br/>

    <div id="qList" class="questionsList">

        <div class="sortbyBox">
            <select id="sorter">
                <option value="sortby" disabled="disabled"> Sort By </option>
                <option value="useful"> Usefulness </option>
                <option value="group"> Group Traffic </option>
            </select>
        </div>
        <br/>

        <div id="usefulposts">

           
        </div>
        <div id="grouptraffic">
            
        </div>

    </div>
    <div id ="templates" style="display:none;" > </div>

</body>
</html>